import{_ as h}from"./1Si6OZBG.js";import{e as P,A as X,f as C,C as S,c as U,a as s,b as l,k as o,z as d,t as i,s as N,o as k}from"./Dn4piMSu.js";import{u as q,a as p}from"./BeIkKftJ.js";import{c as B,b as u,d as E}from"./CPtYI8t7.js";const $={class:"flex flex-col p-5 bg-panelBg rounded-lg w-full min-w-[200px] max-w-[400px]"},A={class:"flex flex-col gap-y-3"},F={class:"flex flex-col gap-y-1 mt-3"},j={class:"text-red-500 text-xs"},z={class:"flex flex-col gap-y-1 mt-3"},D={class:"text-red-500 text-xs"},I={class:"flex flex-col gap-y-1 mt-3"},M={class:"text-red-500 text-xs"},O={class:"flex flex-col gap-y-1 mt-3"},T={class:"text-red-500 text-xs"},W=P({__name:"edit",setup(G){var g;const r=X(),V=C(),y=S(),_=B({current_password:u().required("Current password is required"),password:u().required("New password is required").min(6),password_confirmation:u().oneOf([E("password")],"Passwords must match").required("Confirm your new password"),phone:u().nullable().optional()}),{handleSubmit:b,errors:n,meta:H}=q({validationSchema:_,initialValues:{current_password:"",password:"",password_confirmation:"",phone:((g=r.user)==null?void 0:g.phone)??""}}),{value:m}=p("current_password"),{value:c}=p("password"),{value:f}=p("password_confirmation"),{value:x}=p("phone"),v=b(async w=>{try{const e=await V.updateProfile(w).catch(a=>a.data);if(!e)throw"Unknown error please try again.";if(e!=null&&e.errors)throw e==null?void 0:e.message;r.user.phone=w.phone,y.add({title:"Success!",duration:1500,icon:"i-lucide-badge-check",description:"Profile updated successfully."})}catch(e){y.add({title:"Error!",duration:3500,icon:"i-lucide-x",description:e})}});return(w,e)=>{const a=h;return k(),U("div",$,[e[12]||(e[12]=s("span",{class:"text-lg"},"Edit Profile",-1)),s("form",{onSubmit:e[5]||(e[5]=N((...t)=>o(v)&&o(v)(...t),["prevent"])),class:"mt-8 flex flex-col w-full gap-y-4"},[s("div",A,[e[6]||(e[6]=s("span",{class:"text-sm"},"Email",-1)),l(a,{disabled:"",type:"email",modelValue:o(r).user.email,"onUpdate:modelValue":e[0]||(e[0]=t=>o(r).user.email=t)},null,8,["modelValue"])]),s("div",F,[e[7]||(e[7]=s("span",{class:"text-sm"},"Current Password",-1)),l(a,{type:"password",modelValue:o(m),"onUpdate:modelValue":e[1]||(e[1]=t=>d(m)?m.value=t:null),placeholder:"********"},null,8,["modelValue"]),s("span",j,i(o(n).current_password),1)]),s("div",z,[e[8]||(e[8]=s("span",{class:"text-sm"},"New Password",-1)),l(a,{type:"password",modelValue:o(c),"onUpdate:modelValue":e[2]||(e[2]=t=>d(c)?c.value=t:null),placeholder:"********"},null,8,["modelValue"]),s("span",D,i(o(n).password),1)]),s("div",I,[e[9]||(e[9]=s("span",{class:"text-sm"},"Confirm New Password",-1)),l(a,{type:"password",modelValue:o(f),"onUpdate:modelValue":e[3]||(e[3]=t=>d(f)?f.value=t:null),placeholder:"********"},null,8,["modelValue"]),s("span",M,i(o(n).password_confirmation),1)]),s("div",O,[e[10]||(e[10]=s("span",{class:"text-sm"},"Phone Number",-1)),l(a,{type:"text",modelValue:o(x),"onUpdate:modelValue":e[4]||(e[4]=t=>d(x)?x.value=t:null),placeholder:"+44 XXXX XXXX"},null,8,["modelValue"]),s("span",T,i(o(n).phone),1)]),e[11]||(e[11]=s("button",{type:"submit",class:"text-md font-medium mt-5 inline-flex items-center justify-center gap-x-1 py-2 bg-accent rounded-lg cursor-pointer text-white hover:bg-accent/80 active:scale-105 hover:text-white transition"}," Save ",-1))],32)])}}});export{W as default};
