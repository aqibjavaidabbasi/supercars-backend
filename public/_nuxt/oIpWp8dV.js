import{_ as R}from"./1Si6OZBG.js";import{e as G,f as W,C as Z,D as H,c as o,a as s,k as t,b as u,n as m,z as n,t as i,y as x,E as T,G as B,d as f,w as J,_ as Q,o as r}from"./Dn4piMSu.js";import{u as ee,a as d}from"./BeIkKftJ.js";import{c as te,a as j,b as p,d as se}from"./CPtYI8t7.js";const ae={class:"max-[490px]:px-6 px-12 w-full flex flex-col justify-center items-center"},oe={class:"my-12 w-full max-w-sm flex flex-col justify-center items-center z-10"},re={class:"flex flex-col gap-y-2"},le={key:0,class:"text-red-500 text-xs"},ne={key:1,class:"text-dimmer text-xs"},ie={class:"flex flex-col gap-y-2"},de={key:0,class:"text-red-500 text-xs"},ce={class:"flex flex-col gap-y-2"},ue={key:0,class:"text-red-500 text-xs"},me={class:"flex flex-col gap-y-2"},pe={key:0,class:"text-red-500 text-xs"},xe={class:"flex flex-col gap-y-2"},fe={key:0,class:"text-red-500 text-xs"},ye={key:1,class:"text-dimmer text-xs"},ge={class:"flex flex-col gap-y-2"},_e={key:0,class:"text-red-500 text-xs"},he={key:1,class:"text-dimmer text-xs"},be={class:"flex flex-col gap-y-2"},ve={key:0,class:"text-red-500 text-xs"},we={key:1,class:"text-dimmer text-xs"},Ve={class:"text-dim flex flex-col gap-y-3"},ke={class:"flex items-start gap-x-3"},Ee={key:0,class:"text-red-500 text-xs ml-7"},Me={class:"flex items-start gap-x-3"},qe={key:1,class:"text-red-500 text-xs ml-7"},De={class:"flex flex-col gap-y-3"},Pe=["disabled"],Ne=G({__name:"signup",setup(Ue){const z=W(),X=Z(),A=te({email:p().required("Email is required").email("Please enter a valid email address"),confirm_email:p().required("Please confirm your email").oneOf([se("email")],"Email addresses must match"),forename:p().required("Forename is required").min(2,"Forename must be at least 2 characters"),surname:p().required("Surname is required").min(2,"Surname must be at least 2 characters"),date_of_birth:p().required("Date of birth is required").matches(/^\d{2}\/\d{2}\/\d{4}$/,"Please use DD/MM/YYYY format").test("age","You must be at least 18 years old",function(c){if(!c)return!1;const[e,l,C]=c.split("/").map(Number),a=new Date(C,l-1,e),F=new Date,$=F.getFullYear()-a.getFullYear(),I=F.getMonth()-a.getMonth();return I<0||I===0&&F.getDate()<a.getDate()?$-1>=18:$>=18}),phone:p().required("Phone number is required").matches(/^(\+44\s?7\d{3}\s?\d{6}|07\d{3}\s?\d{6}|\+44\s?[1-9]\d{8,9}|0[1-9]\d{8,9})$/,"Please enter a valid UK number"),password:p().required("Password is required").min(8,"Password must be at least 8 characters").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,"Password must contain at least one uppercase letter, one lowercase letter, and one number"),accept_tos:j().required("You must accept the terms and conditions").oneOf([!0],"You must accept the terms and conditions"),accept_privacy:j().required("You must accept the privacy policy").oneOf([!0],"You must accept the privacy policy")}),{handleSubmit:K,resetForm:Ye,meta:L}=ee({validationSchema:A,initialValues:{email:"",confirm_email:"",forename:"",surname:"",date_of_birth:"",phone:"",password:"",accept_tos:!1,accept_privacy:!1}}),{value:y,errorMessage:g}=d("email"),{value:_,errorMessage:h}=d("confirm_email"),{value:b,errorMessage:v}=d("forename"),{value:w,errorMessage:V}=d("surname"),{value:k,errorMessage:E}=d("date_of_birth"),{value:M,errorMessage:q}=d("phone"),{value:D,errorMessage:P}=d("password"),{value:U,errorMessage:S}=d("accept_tos"),{value:Y,errorMessage:N}=d("accept_privacy"),O=K(async c=>{try{if(!await z.signup({...c,forenames:c.forename,email_confirmation:c.confirm_email,password_confirmation:c.password}))throw rew;X.add({title:"Success!",duration:1500,icon:"i-lucide-badge-check",description:"Your account was created successfully. You can now log in."}),H("/auth/login")}catch{X.add({title:"Error!",duration:1500,icon:"i-lucide-x",description:"Unexpected error during signup. Please try again later."})}});return(c,e)=>{const l=R,C=Q;return r(),o("div",ae,[s("div",oe,[e[20]||(e[20]=s("span",{class:"text-color text-5xl font-black"},"Create your account",-1)),s("form",{onSubmit:e[9]||(e[9]=(...a)=>t(O)&&t(O)(...a)),class:"flex flex-col mt-12 w-full gap-y-6"},[s("div",re,[e[10]||(e[10]=s("span",{class:"text-sm"},"Email",-1)),u(l,{modelValue:t(y),"onUpdate:modelValue":e[0]||(e[0]=a=>n(y)?y.value=a:null),placeholder:"example@gmail.com",type:"email",class:m({"border-red-500":t(g)})},null,8,["modelValue","class"]),t(g)?(r(),o("span",le,i(t(g)),1)):(r(),o("span",ne,"Make sure it's correct!"))]),s("div",ie,[e[11]||(e[11]=s("span",{class:"text-sm"},"Confirm Email",-1)),u(l,{modelValue:t(_),"onUpdate:modelValue":e[1]||(e[1]=a=>n(_)?_.value=a:null),placeholder:"Confirm your email address",type:"email",class:m({"border-red-500":t(h)})},null,8,["modelValue","class"]),t(h)?(r(),o("span",de,i(t(h)),1)):x("",!0)]),s("div",ce,[e[12]||(e[12]=s("span",{class:"text-sm"},"Forenames",-1)),u(l,{modelValue:t(b),"onUpdate:modelValue":e[2]||(e[2]=a=>n(b)?b.value=a:null),placeholder:"Fill your forenames",type:"text",autocomplete:"given-name",class:m({"border-red-500":t(v)})},null,8,["modelValue","class"]),t(v)?(r(),o("span",ue,i(t(v)),1)):x("",!0)]),s("div",me,[e[13]||(e[13]=s("span",{class:"text-sm"},"Surname",-1)),u(l,{modelValue:t(w),"onUpdate:modelValue":e[3]||(e[3]=a=>n(w)?w.value=a:null),placeholder:"Fill your surname",type:"text",autocomplete:"family-name",class:m({"border-red-500":t(V)})},null,8,["modelValue","class"]),t(V)?(r(),o("span",pe,i(t(V)),1)):x("",!0)]),s("div",xe,[e[14]||(e[14]=s("span",{class:"text-sm"},"Date Of Birth",-1)),u(l,{modelValue:t(k),"onUpdate:modelValue":e[4]||(e[4]=a=>n(k)?k.value=a:null),placeholder:"dd/mm/yyyy",type:"text",class:m({"border-red-500":t(E)})},null,8,["modelValue","class"]),t(E)?(r(),o("span",fe,i(t(E)),1)):(r(),o("span",ye,"Our competitions are restricted to those aged over 18"))]),s("div",ge,[e[15]||(e[15]=s("span",{class:"text-sm"},"Phone",-1)),u(l,{modelValue:t(M),"onUpdate:modelValue":e[5]||(e[5]=a=>n(M)?M.value=a:null),placeholder:"+44 XX XXXX XXXX",type:"tel",autocomplete:"tel",class:m({"border-red-500":t(q)})},null,8,["modelValue","class"]),t(q)?(r(),o("span",_e,i(t(q)),1)):(r(),o("span",he,"We need to call you if you win."))]),s("div",be,[e[16]||(e[16]=s("span",{class:"text-sm"},"Password",-1)),u(l,{modelValue:t(D),"onUpdate:modelValue":e[6]||(e[6]=a=>n(D)?D.value=a:null),placeholder:"**********",type:"password",autocomplete:"new-password",class:m({"border-red-500":t(P)})},null,8,["modelValue","class"]),t(P)?(r(),o("span",ve,i(t(P)),1)):(r(),o("span",we,"Must contain uppercase, lowercase, and number"))]),s("div",Ve,[s("div",ke,[T(s("input",{id:"accept_tos","onUpdate:modelValue":e[7]||(e[7]=a=>n(U)?U.value=a:null),type:"checkbox",class:"mt-1 w-4 h-4 text-accent bg-gray-100 border-gray-300 rounded focus:ring-accent"},null,512),[[B,t(U)]]),e[17]||(e[17]=s("label",{for:"accept_tos",class:"text-sm"},[f(" I have read and agree to all the "),s("u",{class:"cursor-pointer"},"terms and conditions"),f(", and confirm that I am a resident of the UK or Ireland. ")],-1))]),t(S)?(r(),o("span",Ee,i(t(S)),1)):x("",!0),s("div",Me,[T(s("input",{id:"accept_privacy","onUpdate:modelValue":e[8]||(e[8]=a=>n(Y)?Y.value=a:null),type:"checkbox",class:"mt-1 w-4 h-4 text-accent bg-gray-100 border-gray-300 rounded focus:ring-accent"},null,512),[[B,t(Y)]]),e[18]||(e[18]=s("label",{for:"accept_privacy",class:"text-sm"},[f(" I agree that my personal data will be used to support my experience throughout this website, to manage access to my account, and for other purposes described in our "),s("u",{class:"cursor-pointer"},"privacy policy"),f(". ")],-1))]),t(N)?(r(),o("span",qe,i(t(N)),1)):x("",!0)]),s("div",De,[s("button",{type:"submit",disabled:!t(L).valid,class:"min-h-[48px] font-[600] inline-flex items-center justify-center gap-x-1 px-4 py-3 bg-accent rounded-lg cursor-pointer text-white hover:bg-accent/80 active:scale-105 hover:text-white transition disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-accent disabled:active:scale-100"}," CREATE ACCOUNT ",8,Pe),u(C,{href:"/auth/login",class:"border-accent/30 border min-h-[48px] inline-flex items-center justify-center gap-x-1 px-4 py-3 bg-white/8 rounded-lg cursor-pointer hover:bg-white/10 active:scale-105 hover:text-normal/70 transition"},{default:J(()=>e[19]||(e[19]=[f(" Log In ")])),_:1,__:[19]})])],32)])])}}});export{Ne as default};
