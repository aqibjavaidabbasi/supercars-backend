import{_ as z}from"./1Si6OZBG.js";import{u as G}from"./BeIkKftJ.js";import{t as O,o as R,s as u}from"./DUyE5pZ-.js";import{e as H,B as J,f as K,v as M,C as Q,D as W,c as r,a as t,k as e,t as a,b as m,y as c,x as p,z as x,o as d}from"./Dn4piMSu.js";const Y={class:"max-[460px]:px-6 px-12 flex justify-center items-center md:py-8 w-full"},Z={class:"max-w-pagewide flex flex-row w-full flex-wrap xl:flex-nowrap gap-x-8 gap-y-12"},ee={class:"flex flex-col p-6 bg-panelBg2 rounded-lg h-fit w-full max-w-[350px] min-w-[200px]"},se={class:"flex flex-row justify-between"},te={class:"text-xl font-black"},oe={class:"mt-2 flex flex-row justify-between"},le={class:"text-md font-medium text-dim"},ae=["disabled"],ne={class:"flex flex-col basis-[60%] w-full"},re={class:"mt-10 gap-y-4 flex flex-col w-full"},de={class:"flex flex-row items-start gap-x-4"},ie={class:"flex flex-col gap-y-2 flex-1"},ue={key:0,class:"text-red-500 text-xs"},me={class:"flex flex-col gap-y-2 flex-1"},ce={key:0,class:"text-red-500 text-xs"},pe={class:"flex flex-col gap-y-2"},xe={key:0,class:"text-red-500 text-xs"},fe={class:"flex flex-col gap-y-2"},ye={key:0,class:"text-red-500 text-xs"},ve={class:"flex flex-col gap-y-2"},ge={key:0,class:"text-red-500 text-xs"},be={class:"flex flex-col gap-y-2"},we={key:0,class:"text-red-500 text-xs"},Ve={class:"flex flex-col gap-y-2"},_e={key:0,class:"text-red-500 text-xs"},he={class:"flex flex-col gap-y-2"},Le={key:0,class:"text-red-500 text-xs"},Ee=H({__name:"checkout",setup(ke){const v=J(),X=K(),y=M(!1),P=Q(),E=O(R({forenames:u().min(1,"Forenames are required").min(2,"Forenames must be at least 2 characters"),surname:u().min(1,"Surname is required").min(2,"Surname must be at least 2 characters"),phone:u().min(1,"Phone number is required").regex(/^[\+]?[0-9\s\-\(\)]+$/,"Please enter a valid phone number"),addressLine1:u().min(1,"Address Line 1 is required"),addressLine2:u().optional(),city:u().min(1,"City is required"),postCode:u().min(1,"Postcode is required"),country:u().min(1,"Country is required")})),{defineField:i,handleSubmit:S,errors:o,meta:U,validate:q}=G({validationSchema:E,initialValues:{forenames:"",surname:"",phone:"",addressLine1:"",addressLine2:"",city:"",postCode:"",country:""}}),[g,T]=i("forenames"),[b,j]=i("surname"),[w,B]=i("phone"),[V,F]=i("addressLine1"),[_,N]=i("addressLine2"),[h,D]=i("city"),[L,I]=i("postCode"),[k,$]=i("country"),C=S(async A=>{const{valid:s}=await q();y.value=!0;const n=v.cart.map(f=>({id:f.id,numbers:f.numbers,amount:f.amount})),l={...A,cart:n};try{const f=await X.checkout.sendOrder(l);W("/cart/payment")}catch{P.add({title:"Error!",icon:"i-lucide-x",description:"Unknown error while processing your order, please re-check your details."})}y.value=!1});return(A,s)=>{const n=z;return d(),r("div",Y,[t("div",Z,[t("form",{onSubmit:s[8]||(s[8]=(...l)=>e(C)&&e(C)(...l)),class:"mt-8 flex flex-row xl:flex-row-reverse gap-x-28 gap-y-12 flex-wrap xl:flex-nowrap w-full",style:{"justify-content":"start"}},[t("div",ee,[t("div",se,[s[9]||(s[9]=t("span",{class:"text-xl font-black"},"Total",-1)),t("span",te,"Â£"+a(Number(e(v).totalPrice).toFixed(2)),1)]),t("div",oe,[s[10]||(s[10]=t("span",{class:"text-md font-medium"},"Tickets",-1)),t("span",le,a(e(v).totalItems),1)]),t("button",{disabled:e(y)||!e(U).valid,type:"submit",href:"/cart/checkout",class:"disabled:bg-dimmer disabled:text-dim disabled:cursor-not-allowed text-xl font-bold mt-5 inline-flex items-center justify-center gap-x-1 py-3 bg-accent rounded-lg cursor-pointer text-white hover:bg-accent/80 active:scale-105 hover:text-white transition"},a(e(y)?"Processing..":"Proceed to payment"),9,ae)]),t("div",ne,[s[19]||(s[19]=t("span",{class:"text-xl font-bold"},"BILLING",-1)),t("div",re,[t("div",de,[t("div",ie,[s[11]||(s[11]=t("span",{class:"text-sm"},"Forenames",-1)),m(n,p({modelValue:e(g),"onUpdate:modelValue":s[0]||(s[0]=l=>x(g)?g.value=l:null)},e(T),{placeholder:"Enter your given names",type:"text",autocomplete:"given-name",class:{error:e(o).forenames}}),null,16,["modelValue","class"]),e(o).forenames?(d(),r("span",ue,a(e(o).forenames),1)):c("",!0)]),t("div",me,[s[12]||(s[12]=t("span",{class:"text-sm"},"Surname",-1)),m(n,p({modelValue:e(b),"onUpdate:modelValue":s[1]||(s[1]=l=>x(b)?b.value=l:null)},e(j),{placeholder:"Enter your family name",type:"text",autocomplete:"family-name",class:{error:e(o).surname}}),null,16,["modelValue","class"]),e(o).surname?(d(),r("span",ce,a(e(o).surname),1)):c("",!0)])]),t("div",pe,[s[13]||(s[13]=t("span",{class:"text-sm"},"Phone",-1)),m(n,p({modelValue:e(w),"onUpdate:modelValue":s[2]||(s[2]=l=>x(w)?w.value=l:null)},e(B),{placeholder:"+44 XXX XXXX XXXX",type:"tel",autocomplete:"tel",class:{error:e(o).phone}}),null,16,["modelValue","class"]),e(o).phone?(d(),r("span",xe,a(e(o).phone),1)):c("",!0)]),t("div",fe,[s[14]||(s[14]=t("span",{class:"text-sm"},"Address Line 1",-1)),m(n,p({modelValue:e(V),"onUpdate:modelValue":s[3]||(s[3]=l=>x(V)?V.value=l:null)},e(F),{placeholder:"Enter your current address",type:"text",autocomplete:"address-line1",class:{error:e(o).addressLine1}}),null,16,["modelValue","class"]),e(o).addressLine1?(d(),r("span",ye,a(e(o).addressLine1),1)):c("",!0)]),t("div",ve,[s[15]||(s[15]=t("span",{class:"text-sm"},"Address Line 2 (optional)",-1)),m(n,p({modelValue:e(_),"onUpdate:modelValue":s[4]||(s[4]=l=>x(_)?_.value=l:null)},e(N),{type:"text",placeholder:"Enter your other address",autocomplete:"address-line2",class:{error:e(o).addressLine2}}),null,16,["modelValue","class"]),e(o).addressLine2?(d(),r("span",ge,a(e(o).addressLine2),1)):c("",!0)]),t("div",be,[s[16]||(s[16]=t("span",{class:"text-sm"},"City",-1)),m(n,p({modelValue:e(h),"onUpdate:modelValue":s[5]||(s[5]=l=>x(h)?h.value=l:null)},e(D),{placeholder:"Enter your city",type:"text",autocomplete:"address-level2",class:{error:e(o).city}}),null,16,["modelValue","class"]),e(o).city?(d(),r("span",we,a(e(o).city),1)):c("",!0)]),t("div",Ve,[s[17]||(s[17]=t("span",{class:"text-sm"},"Postcode",-1)),m(n,p({modelValue:e(L),"onUpdate:modelValue":s[6]||(s[6]=l=>x(L)?L.value=l:null)},e(I),{type:"text",placeholder:"Enter city postal code",autocomplete:"postal-code",class:{error:e(o).postCode}}),null,16,["modelValue","class"]),e(o).postCode?(d(),r("span",_e,a(e(o).postCode),1)):c("",!0)]),t("div",he,[s[18]||(s[18]=t("span",{class:"text-sm"},"Country",-1)),m(n,p({modelValue:e(k),"onUpdate:modelValue":s[7]||(s[7]=l=>x(k)?k.value=l:null)},e($),{type:"text",placeholder:"Enter your country",autocomplete:"country-name",class:{error:e(o).country}}),null,16,["modelValue","class"]),e(o).country?(d(),r("span",Le,a(e(o).country),1)):c("",!0)])])])],32)])])}}});export{Ee as default};
